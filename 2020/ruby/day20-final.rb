require 'colorize'

image = <<~DATA
..#..###......###.#.#.#......#...#.#...#.......##............##.........#.#..#......#..####...#.
.....#..#.....#.#..#......#....#......#......#................#..............#.....#.........#.#
................#.................#...#....##.##..#..##.#..####..#.......#..#..#.##..##.#.......
.#......####..#..#.##..#.......#..##......##...####...##....##....#...###....##.##.##....#..##..
.#.#.###..#.##....##....#...#.....#.............##..#....#........##...#.................#.....#
##..#.#.....#.#..#...##...............#............#....##...##.#.###........#........##..#..##.
......#...#...#......#.#..#.##..#.....##.##..#...#.#...#.####..#..#.....#........##.#.#.#.#.....
......##.#.##.#...........#..#...........#........#..##....#..#..#..#..#..#......#...#....#.....
..#......#..#.##..#.##..#......#...................##...###....##..#.##.#..##....#....#....#.#..
......####.#.##....###...#............###.#.##.##....#...##..#.#.....##.#.#.#.#.##.#..#.##......
......##...#.....................#..#..#..##.#.###.##..#..#....#.......#.#................#.....
..#..#..#.....##......##.#...#.#.####...##....####..#....##..##...#.#.......#...#.....#.........
..#........##.#.........##...##...##...#.##......#..#.##.#.........###.#.##...#.#......#....#...
.#..#.................#......##..#.......#..#......................#.#.....#.....#..........#...
.#.#.#...#....####..#####.#..#...#.#.#....##..#..#.##..........#.#......#.##.#..#..#.##..#......
..#..#..#..####...##..#####..##..##.####..#......#.....##....#..#.#...#####...##....##....#...#.
...........###..#.....##.....###....###....##....#.......#.#............#........#......#..#.#..
#...............#.##.#...#.......#.........##..#..#.#####..#..#..#...#.##.#................#....
.#....#..##..#.......#..#....#.#.....#....#....####...##...###....#..#.....####..#.....##......#
...#.#....#.#..#.....#.....##.#.........##.#..#.#........##.##.##.#...#.....#...#.....##...#.##.
..........#........#.....#..#..#..##.#.##..#...........#..#..........#..........#........##..#..
#...#..#....#.#....#..####...##...####...#.....#.#..#...#...........#..#..#..#.##..#..##......#.
..#.............#.##...#.#...........#...#....#........#..#...#....####...###...###.#..#.....#..
###.#..#.#.#.............#.##...#............#....#...##..........#..#....#...........#...##..#.
##.##....#..#.####...#..#.#......#..##.#..#.##..#..##.....##.#.......#..#..#..#.##.....#.#..###.
...#.#..##.#.##.###.#..#..#.###..###....###...###.#.#......#.##........#..##.#...#.....##.#...#.
.#####...####..##.#..#............#.###.....#..###.#........#.........#.##.##.....##...#..#..#..
..##.....#.####..##.##.#.#....#..#........#..#...#..#.......#.....####.#...#.....#...#..##..#...
...#......##....#.......#......#.#...#...#..#.#.###.#...#.#.#.#........##..#....#.#.##.........#
.....#.......#.........#.....#....#.####....#.#.###.........#.#.....#..#..#..#..##.###..#.#.##.#
..##.##.#....#.##..#..##.##.#...#.#..#.##..##.#..#..#.#.##....#..###....###..###....#......#....
.#.#...#..###.#.###....###.#.#.#..###....###...####..#..#.##.#....#.......#...#.#.......##...##.
.##.#...#..#..#....#.....#.......###...#....#..#.#..#..#.#......##......##....##..#.........#...
#.....#.#.................##.........#..##......#.##....#.#..........#............#..#..#....#.#
...........#.#....#........##...#.......#...............##.....#..#.......#..#..#.##..#.##.#....
..###........#.#.........#.......#..#...#.#.#.......#...##.#.......#...###..####.##.##....###..#
.#.#...#...#..#..##.##.##.#..#...#.......#.#.....#..#.###.#.......#.#...#...#........#...##..##.
...#...####....##.##.##.#..#...#.##.#..#..#..#..#.#.....###....#..........#...#...#...#..#..##.#
.........#...#..#.#.#.......#.###....##....##....#..#.#.#..####..##..#......#...#..#..###.#...#.
......#.#....#.........#.......##.#......#..#..#.#....#....###...............#....#.............
.....#..#...................#.....##.#.......#....#####......#....#.....#..#............#..#....
##.......##.............#..#.#....##.#....#.....##.#..#..#..#..#...#.#.#.###.....##........##...
#....#....#.#........#....#.#....#.....#.#..####....##....##....##......#....#....#...###..#....
##.#.............#.#.....###....#.###.#.......#..#....#..#.....#.#.....#..##..#.#.........#..##.
..#.......#.#.....#..#...#..#...........##...#...#......#......#..#.........#..#.##..#.....#.###
....#....##...#............#.#.........#...#..........##........#....#...##..#.##....##.........
........#..##.#..#..##.#..##.#.#...#.#..##..................##.##...#...........#............##.
####.#.....###.#..###...##..#.#.##.....#.......#......#.#..................###..#..#..#.##..#..#
.....#......#.#....#.#......##........#.....#.#..##..#.....#..#.....##....###..#.###..###....#..
..#.#.#.........#..#....#...##...#....#....##......##.....#..#..#..#....####.#..#....#....##...#
.....#.....#.....#......##...#.#..#..#..##.##.#.....#....#...#.#............#........#..#..#...#
..............#...###.......###..#.##....##....#.....#..##.##.........#.#..#.#.......#........#.
...#..........#.#.#.#.#...#..#...##....#.#.......#.........#....................#.......#.....#.
.........#..##.#..#..#.##.....#......#.....#........###.#..#..#.##..#..#......#........#....#...
......###....##...###..#.###.#..#........#.#.#....###.##.##....##....##..##....##.#.............
....##.#...#.##..#.##...#........#.....###.....##.##.......#....#..#..#..##.#.........#.#.......
..#......#..#.##.........#..##..#..#..#.#.....#.#........#.......#.#..#.#.#.....#....#..........
##.#.....##.#........#...#.............#........#..#...##..##...#..#..#.##..#..#.....##.#.......
........#..#.#.#.......#...##.#.......#......#..#...#..#..#..###..#.##..####.##.###.....#.......
....#...............##.#....##..#..##.#..#..#.#.....#.........##....#....#.##......#........##..
##..#..#...#......#.....#.###.#..##.##.##...##.........##....#.##..##.#..#....#...#.#.....##....
#.##.###.........#.##.....###......##.#.........#....#..#......#.#.........##.#.##..#..#..#.....
###...#...#...#.#..###.......#.......##..#.#...#.##.......##....#.#.....###....##....####..#....
.#.....#..#....#...#..##....#.#..#......#.#.....#..#.##..#..#..#.##.###..#..#......##..#........
.......#.###....#.#....#.....#..#....#.....#.###....##....##....##....##..#.....#.#....#...#.###
.#.#..#.##..#..##.##.#..##.##.##.#.........####..##..#.............#.#........#.##............#.
...#....#......###....##....###...#...#.###.#.#.....#...#........#.##.....#.#........##......#..
#..###..........#.......#.......##..##..#......#..#...........###.##...#...##.#............##..#
#......#................#....#.#..#....#.#..#..#....#...#.....#.....#...........##..............
#.#...#.##..#..#.............#..#..#.#..#.##.#...........##.#..#.##..#..#.##.##...#...#...##....
....#.....##.#.#..#...#....##...##.......#..........#.###.#.###....##....#.#...#...#..#.........
...#..#.....#.#......#..##...##.#....#......#........###...##.#..#......#.#.#........#.....#..#.
..........##.#..#..#.......###.##.##........#.#...#............#....##....##...#...#.#.#..#.#...
.#.#.####.#..#.##..#..#.....##.#..#.###.####.####.....#.......#..#.....#..#..#......#..#..#.....
#...###....##....##....#....###..####.#..###...#................#...........####..#..##.####.#.#
...###.....##......#...###...#..#...##........#.......#.....#....#....#..###.#..##..####.#..##..
...#..#...#.#..........#.#.....#..#..#..##......#.#......#...#...##..##.#.###.....#.#...#.......
#.#...#.........#.....##..#..........#.#...##........#......#.....#.........##.###..#.##..###..#
#..##...##.....................#.....#.#...#.....#..##.#.#.....##..#................##.#.......#
..##...#.#...###.......#.#...#..##.....#..#......###.......#...##......#..#.###.#..#..#..#...##.
...##..##..####..#..#.##...##....#...#..#....#..###.####..#..#..#...###....##...###....#..#...#.
..#..###.#..###.#.###...##...#..#.............###....##.#..####..#...#.......#...........#......
....#.#...####...##....#.#...#.........#.......#.#.#...............##.....##...#.....#...##.....
.#....#.......##.###.##..#....#...#.#...#.##.##..##..#...#.......#..#..#...................#....
..#..#.......####..#..#..#..#...#...###...#...##...#..........##......#.#...#..#..##.####..#.##.
.......#..#####..##.#.####...#.##...#.#.#.........##..#...........##..#..###....##.##.##....#...
.##..#....###....###.#.#...#..#.##....#...#...#..#.#..........#......##...##.#...#.#..#..#.#.##.
.#....#.#.#.........#.#.....#......#.#..#...####....................#.#......#...#..###.......#.
#..#.#...#..#.#.........#.#.#........#....#...#..#.##..####..#..#...........#.#..#...####.......
..#..#.##.#.#..#....#..#.......#...#..........###....##....##....#..#...#........##..##.#.......
.#......#...#...#...#....#..#..#..##.##.##.....##...#.#..#.#.#....#.#......#.........#.#......#.
..............#.....#####...###..#.##...##.....#....######..#..........#.#....#...#..#......#...
..#.#..#.....#..##...#.#....#.#......#.#..........#..###..#..#..#..#..###....##..#.##..#..#..#..
..............#.#........##.........#..#...#....#...###....##....###...##..###....##.##.##.#..#.
.......#..#.#.....#...#....#....###....##..##...#....#.#.#......#....##.#...#......#.#....#..#..
.......#..#.....#.#...#.#...#.##.#..#..#..#.#..###...#........#.....##...#...####..#..........##
DATA

GRID = image.lines.map { |l| l.strip.split('') }.map(&:reverse).reverse

MONSTER = [
  "                  # ",
  "#    ##    ##    ###",
  " #  #  #  #  #  #   ",
].map { |l| l.split('') }

# grid width/height
GW, GH = GRID[0].length, GRID.length
# monster width/height
MW, MH = MONSTER[0].length, MONSTER.length

def find(ox, oy)
  for y in 0...MH
    for x in 0...MW
      if MONSTER[y][x] == '#' && GRID[oy+y][ox+x] != '#'
        return false
      end
    end
  end
  true
end

def highlight(ox, oy)
  for y in 0...MH
    for x in 0...MW
      if MONSTER[y][x] == '#'
        GRID[oy+y][ox+x] = 'â–“'
      end
    end
  end
end

for oy in 0...(GH-MH)
  for ox in 0...(GW-MW)
    if find(ox, oy)
      highlight(ox, oy)
    end
  end
end

puts GRID.map(&:join).join("\n")

puts GRID.flatten.count('#')
